
# This file was generated by the Tkinter Designer by Parth Jadhav
# https://github.com/ParthJadhav/Tkinter-Designer


from pathlib import Path
from tkinter import ttk
import tkinter as tk
# from tkinter import *
# Explicit imports to satisfy Flake8
from tkinter import Tk, Canvas, Entry, Text, Button, PhotoImage,StringVar,OptionMenu,font
from dbconnectionadmin import get_highest_strike_rate,get_most_runs,get_points_table,get_most_wickets
#from dbconnectionadmin import get_most_runs, get_most_wickets, get_highest_strike_rate, get_points_table



OUTPUT_PATH = Path(__file__).parent
ASSETS_PATH = OUTPUT_PATH / Path(r"C:\Users\Soham\Desktop\RAMDOM PROJECTS\cricket_league_management\ui\build\admindash\assets1\assetsstats\frame0")


def relative_to_assets(path: str) -> Path:
    return ASSETS_PATH / Path(path)



def update_table(*args):
    selection = selected_option.get()
    for col in tree["columns"]:
        tree.heading(col, text="")  # Clear headings
        tree.column(col, width=0)   # Hide columns

    if selection == "Most Runs":
        columns = ("Player Name", "Team Name", "Runs")
        data = get_most_runs()
    elif selection == "Most Wickets":
        columns = ("Player Name", "Team Name", "Wickets")
        data = get_most_wickets()
    # elif selection == "Highest Strike Rate":
    #     columns = ("Player Name", "Team Name", "Strike Rate")
    #     data = get_highest_strike_rate()
    elif selection == "Points Table":
        columns = ("Team Name", "Matches Played", "Wins", "Lose", "Points")
        data = get_points_table()
    else:
        return
    
    # Configure Treeview with new columns
    tree["columns"] = columns
    for col in columns:
        tree.heading(col, text=col)
        tree.column(col, width=150, anchor="center")  # Adjust width as needed
    
    # Clear previous data
    tree.delete(*tree.get_children())
    style = ttk.Style()
    style.configure("Treeview", font=("Iceland", 18))  # Change font for rows
    style.configure("Treeview.Heading", font=("Iceland", 17, "bold")) 
    style.configure("Treeview", rowheight=38)
    # Insert new data
    for row in data:
        tree.insert("", "end", values=row)


window = Tk()

window.geometry("1368x720")
window.configure(bg = "#FFFFFF")
window.title("player stats")
canvas = Canvas(
    window,
    bg = "#FFFFFF",
    height = 720,
    width = 1368,
    bd = 0,
    highlightthickness = 0,
    relief = "ridge"
)

frame = tk.Frame(window, bg="#FAF2F2")
frame.place(x=170, y=220, width=800, height=420)  # Adjust as needed

# Combobox inside the frame
options = ["Most Runs", "Most Wickets", "Points Table"]

# Create StringVar to store selection
selected_option = StringVar()
selected_option.set(options[0])  # Default value

# Create OptionMenu
dropdown = OptionMenu(window, selected_option, *options,)

# Set custom font (optional)
custom_font = font.Font(family="Iceland", size=20)
dropdown["menu"].config(font=custom_font)  
dropdown.config(font=custom_font)
dropdown.config(bg="#FAF2F2")

# Place it manually (Adjust x, y, width, height as needed)
dropdown.place(x=190.5, y=170.0, width=245.0, height=40.0)

# Treeview Table inside the frame
tree = ttk.Treeview(frame, columns=[], show="headings", height=5)
tree.pack(expand=True, fill="both", padx=5, pady=5)

# Add a scrollbar


# Bind option to update table function
selected_option.trace_add("write", update_table)


canvas.place(x = 0, y = 0)
image_image_1 = PhotoImage(
    file=relative_to_assets("image_1.png"))
image_1 = canvas.create_image(
    1269.0,
    667.0,
    image=image_image_1
)

image_image_2 = PhotoImage(
    file=relative_to_assets("image_2.png"))
image_2 = canvas.create_image(
    -20.0,
    178.0,
    image=image_image_2
)

image_image_3 = PhotoImage(
    file=relative_to_assets("image_3.png"))
image_3 = canvas.create_image(
    752.9999817200296,
    -30.0,
    image=image_image_3
)

image_image_4 = PhotoImage(
    file=relative_to_assets("image_4.png"))
image_4 = canvas.create_image(
    316.0,
    682.0,
    image=image_image_4
)

image_image_5 = PhotoImage(
    file=relative_to_assets("image_5.png"))
image_5 = canvas.create_image(
    588.0,
    386.0,
    image=image_image_5
)

image_image_6 = PhotoImage(
    file=relative_to_assets("image_6.png"))
image_6 = canvas.create_image(
    399.0,
    104.0,
    image=image_image_6
)

image_image_7 = PhotoImage(
    file=relative_to_assets("image_7.png"))
image_7 = canvas.create_image(
    383.0,
    105.0,
    image=image_image_7
)

image_image_8 = PhotoImage(
    file=relative_to_assets("image_8.png"))
image_8 = canvas.create_image(
    1269.0,
    294.0,
    image=image_image_8
)

update_table("Most Runs")
#update_table("Most Runs")
window.resizable(False, False)
window.mainloop()
